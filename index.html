<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>GenerLink Compatibility Checker ‚Äì Generator Solutions</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    :root {
      --midnight: #020921;
      --accent-orange: #f58a1f;
      --accent-blue: #245bb4;
      --text-light: #f5f7ff;
      --text-muted: #b6c2e3;
      --card-bg: #050b1b;
      --ok: #4ade80;
      --warn: #facc15;
      --bad: #f97373;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      min-height: 100vh;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: radial-gradient(circle at top, #0b1f4a 0, var(--midnight) 45%, #000 100%);
      color: var(--text-light);
      padding: 24px 16px 40px;
      display: flex;
      justify-content: center;
    }

    .page-wrap {
      width: 100%;
      max-width: 1100px;
    }

    header {
      text-align: center;
      margin-bottom: 24px;
    }

    .brand {
      margin-bottom: 12px;
    }

    .brand img {
      height: 70px;
      width: auto;
      filter: drop-shadow(0 0 4px rgba(255,255,255,0.7));
    }

    h1 {
      font-size: 1.9rem;
      margin-bottom: 6px;
    }

    .tagline {
      font-size: 0.95rem;
      color: var(--text-muted);
      max-width: 680px;
      margin: 0 auto;
    }

    .layout {
      display: grid;
      grid-template-columns: minmax(0, 1.4fr) minmax(0, 1.1fr);
      gap: 20px;
      margin-top: 26px;
    }

    @media (max-width: 900px) {
      .layout {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    .card {
      background: radial-gradient(circle at top, #101935 0, var(--card-bg) 55%);
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,0.05);
      padding: 18px 18px 22px;
      box-shadow:
        0 20px 50px rgba(0,0,0,0.65),
        0 0 0 1px rgba(255,255,255,0.02);
    }

    .card h2 {
      font-size: 1.2rem;
      margin-bottom: 6px;
    }

    .card-sub {
      font-size: 0.9rem;
      color: var(--text-muted);
      margin-bottom: 14px;
    }

    .section-title {
      font-size: 0.9rem;
      text-transform: uppercase;
      letter-spacing: 0.14em;
      color: var(--text-muted);
      margin: 14px 0 6px;
    }

    label {
      font-size: 0.9rem;
      display: block;
      margin-bottom: 5px;
    }

    select, input[type="text"], input[type="email"] {
      width: 100%;
      padding: 8px 10px;
      border-radius: 10px;
      border: 1px solid rgba(255,255,255,0.12);
      background: rgba(3,7,18,0.85);
      color: var(--text-light);
      font-size: 0.95rem;
      outline: none;
    }

    select:focus, input[type="text"]:focus, input[type="email"]:focus {
      border-color: var(--accent-orange);
      box-shadow: 0 0 0 1px rgba(245,138,31,0.4);
    }

    .grid-2 {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 10px 12px;
    }

    @media (max-width: 640px) {
      .grid-2 {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    .hint {
      font-size: 0.8rem;
      color: var(--text-muted);
      margin-top: 2px;
    }

    .pill-group {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    .pill-toggle {
      position: relative;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.18);
      background: rgba(15,23,42,0.9);
      font-size: 0.86rem;
      cursor: pointer;
      user-select: none;
    }

    .pill-toggle input {
      position: absolute;
      opacity: 0;
      pointer-events: none;
    }

    .pill-toggle span {
      pointer-events: none;
    }

    .pill-toggle input:checked + span {
      color: #020617;
      font-weight: 600;
    }

    .pill-bg {
      position: absolute;
      inset: -1px;
      border-radius: inherit;
      background: radial-gradient(circle at top, #fed7aa, #f97316);
      opacity: 0;
      transform: scale(0.9);
      transition: all 0.16s ease-out;
      z-index: -1;
    }

    .pill-toggle input:checked ~ .pill-bg {
      opacity: 1;
      transform: scale(1);
    }

    .buttons-row {
      margin-top: 18px;
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }

    button {
      border: none;
      border-radius: 999px;
      padding: 9px 16px;
      font-size: 0.95rem;
      cursor: pointer;
      font-weight: 600;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .btn-primary {
      background: linear-gradient(135deg, #fbbf24, #f97316);
      color: #020617;
      box-shadow:
        0 0 20px rgba(248,250,252,0.25),
        0 8px 25px rgba(0,0,0,0.9);
    }

    .btn-secondary {
      background: rgba(15,23,42,0.95);
      color: var(--text-light);
      border: 1px solid rgba(148,163,184,0.4);
    }

    .btn-primary:hover { filter: brightness(1.05); }
    .btn-secondary:hover { border-color: var(--accent-orange); }

    .result-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 6px;
    }

    .badge {
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      padding: 4px 9px;
      border-radius: 999px;
      border: 1px solid rgba(148,163,184,0.5);
      color: var(--text-muted);
    }

    .badge-status-ok { border-color: var(--ok); color: var(--ok); }
    .badge-status-warn { border-color: var(--warn); color: var(--warn); }
    .badge-status-bad { border-color: var(--bad); color: var(--bad); }

    .result-main {
      font-size: 1.7rem;
      font-weight: 700;
      margin-bottom: 4px;
    }

    .result-sub {
      font-size: 0.95rem;
      color: var(--text-muted);
      margin-bottom: 10px;
    }

    .tag-pills {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-bottom: 10px;
    }

    .tag {
      font-size: 0.78rem;
      padding: 4px 8px;
      border-radius: 999px;
      background: rgba(15,23,42,0.9);
      border: 1px solid rgba(148,163,184,0.5);
    }

    .tag.ok { border-color: var(--ok); color: var(--ok); }
    .tag.warn { border-color: var(--warn); color: var(--warn); }
    .tag.bad { border-color: var(--bad); color: var(--bad); }

    .summary-list {
      list-style: none;
      font-size: 0.88rem;
      color: var(--text-muted);
      margin: 8px 0 12px;
    }

    .summary-list li { margin-bottom: 4px; }

    .alt-box {
      margin-top: 8px;
      padding: 8px 10px;
      border-radius: 12px;
      border: 1px solid rgba(148,163,184,0.4);
      background: rgba(15,23,42,0.75);
      font-size: 0.86rem;
    }

    .alt-box strong {
      color: var(--accent-orange);
    }

    .legal-note {
      margin-top: 10px;
      font-size: 0.78rem;
      color: var(--text-muted);
    }

    .email-section {
      margin-top: 14px;
      border-top: 1px solid rgba(148,163,184,0.35);
      padding-top: 10px;
    }

    .email-grid {
      display: grid;
      grid-template-columns: minmax(0, 1.1fr) minmax(0, 1.1fr);
      gap: 8px 10px;
      margin-bottom: 8px;
    }

    @media (max-width: 700px) {
      .email-grid {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    .email-note {
      font-size: 0.8rem;
      color: var(--text-muted);
    }

    .notice {
      font-size: 0.8rem;
      margin-top: 6px;
      color: var(--text-muted);
    }
  </style>
</head>
<body>
  <div class="page-wrap">
    <header>
      <div class="brand">
        <!-- Replace logo.png with your actual logo file name if different -->
        <img src="logo.png" alt="Generator Solutions Logo" />
      </div>
      <h1>GenerLink Compatibility Checker</h1>
      <p class="tagline">
        Check if your portable or standby generator is compatible with the GenerLink transfer switch.
        This tool is a guide only ‚Äî final approval always depends on the official GenerLink list and your local utility.
      </p>
    </header>

    <main class="layout">
      <!-- LEFT: INPUTS -->
      <section class="card">
        <h2>Your Generator Details</h2>
        <p class="card-sub">
          Enter your generator information as it appears on the data plate.
          The more accurately it‚Äôs entered, the better the compatibility match.
        </p>

        <div class="section-title">Brand & Model</div>
        <div class="grid-2">
          <label>
            Brand
            <select id="genBrand">
              <option value="">Select brand‚Ä¶</option>
              <option value="Generac">Generac</option>
              <option value="Firman">Firman</option>
              <option value="Honda">Honda</option>
              <option value="Champion">Champion</option>
              <option value="Yamaha">Yamaha</option>
              <option value="Other">Other / not listed</option>
            </select>
          </label>
          <label>
            Model
            <input type="text" id="genModel" placeholder="e.g. GP8000E, P08008, EU7000is" />
            <div class="hint">Type the exact model from the nameplate if possible.</div>
          </label>
        </div>

        <div class="section-title">Revision / Version (optional)</div>
        <div class="grid-2">
          <label>
            Revision / Version
            <input type="text" id="genRev" placeholder="e.g. REV 00, REV 01, A, B" />
          </label>
          <label>
            Generator Type
            <select id="genType">
              <option value="portable">Portable generator</option>
              <option value="standby">Home standby generator</option>
            </select>
          </label>
        </div>

        <div class="section-title">Approximate Output</div>
        <div class="pill-group" id="wattageGroup">
          <label class="pill-toggle">
            <input type="radio" name="watts" value="under5" />
            <span>Under 5 kW</span>
            <div class="pill-bg"></div>
          </label>
          <label class="pill-toggle">
            <input type="radio" name="watts" value="5to8" checked />
            <span>5 ‚Äì 8 kW</span>
            <div class="pill-bg"></div>
          </label>
          <label class="pill-toggle">
            <input type="radio" name="watts" value="8to12" />
            <span>8 ‚Äì 12 kW</span>
            <div class="pill-bg"></div>
          </label>
          <label class="pill-toggle">
            <input type="radio" name="watts" value="12to15" />
            <span>12 ‚Äì 15 kW</span>
            <div class="pill-bg"></div>
          </label>
          <label class="pill-toggle">
            <input type="radio" name="watts" value="over15" />
            <span>15 kW +</span>
            <div class="pill-bg"></div>
          </label>
        </div>
        <p class="hint">
          If you‚Äôre not sure, use the running wattage from the data plate or user manual.
        </p>

        <div class="buttons-row">
          <button class="btn-primary" type="button" onclick="runCompatibilityCheck()">
            ‚ö° Check Compatibility
          </button>
          <button class="btn-secondary" type="button" onclick="resetChecker()">
            Reset
          </button>
        </div>
      </section>

      <!-- RIGHT: RESULTS -->
      <section class="card">
        <div class="result-header">
          <h2>Compatibility Result</h2>
          <span class="badge" id="statusBadge">Waiting for input‚Ä¶</span>
        </div>

        <div id="resultTitle" class="result-main">No result yet</div>
        <p id="resultSummary" class="result-sub">
          Enter your generator details on the left and click ‚ÄúCheck Compatibility‚Äù to see if it appears in our reference list.
        </p>

        <div class="tag-pills" id="resultTags"></div>

        <ul class="summary-list" id="summaryList">
          <li>Brand: ‚Äî</li>
          <li>Model: ‚Äî</li>
          <li>Revision: ‚Äî</li>
          <li>Generator type: ‚Äî</li>
          <li>Approximate output: ‚Äî</li>
        </ul>

        <div class="alt-box" id="altBox" style="display:none;">
          <strong>Suggested next steps:</strong>
          <div id="altText" style="margin-top:4px;"></div>
        </div>

        <p class="legal-note">
          This tool is for guidance only and is based on a partial internal reference.
          Final compatibility must always be confirmed against the official GenerLink compatibility list and approved by your local utility and electrical authority.
        </p>

        <div class="email-section">
          <h3 style="font-size:1rem;margin-bottom:4px;">Email These Results</h3>
          <p class="email-note">
            Create an email with your compatibility result that you can send to yourself and to Generator Solutions.
          </p>

          <div class="email-grid">
            <label>
              <span style="font-size:0.85rem;">Your name</span>
              <input type="text" id="custName" placeholder="e.g. Jane Smith" />
            </label>
            <label>
              <span style="font-size:0.85rem;">Your email address</span>
              <input type="email" id="custEmail" placeholder="you@example.com" />
            </label>
          </div>

          <div class="buttons-row">
            <button class="btn-primary" type="button" onclick="openEmailDraft()">
              ‚úâÔ∏è Email Compatibility Result
            </button>
            <button class="btn-secondary" type="button" onclick="bookGenerLinkConsult()">
              üìç Book a GenerLink Consultation
            </button>
          </div>

          <p class="notice">
            This uses your device‚Äôs email app to create a draft addressed to
            <strong>sales@generatorsolutions.ca</strong> with you on copy. You can review and send it from there.
          </p>
        </div>
      </section>
    </main>
  </div>

  <script>
    // --------------------------------------------------------------------
    // SAMPLE compatibility dataset
    // Replace/expand this with your real internal/official GenerLink list.
    // --------------------------------------------------------------------
    const COMPAT_DATA = [
      {
        brand: "Generac",
        models: ["GP6500", "GP7500E", "GP8000E", "GP8000E-2"],
        status: "compatible",
        notes: "Listed as compatible when equipped with a 120/240V 30A twist-lock (L14-30) outlet.",
        outlet: "L14-30 120/240V, 30A",
        recommended: [],
        flags: ["portable", "aircooled"]
      },
      {
        brand: "Generac",
        models: ["XG8000E"],
        status: "compatible",
        notes: "Compatible with GenerLink when wired using the 30A 120/240V outlet and properly sized cord.",
        outlet: "L14-30 120/240V, 30A",
        recommended: [],
        flags: ["portable", "aircooled"]
      },
      {
        brand: "Firman",
        models: ["P08003", "P08004", "T08072"],
        status: "compatible",
        notes: "Certain Firman 8 kW models are compatible; confirm exact model and revision against the latest GenerLink chart.",
        outlet: "30A 120/240V",
        recommended: [],
        flags: ["portable"]
      },
      {
        brand: "Firman",
        models: ["P08008"],
        status: "not",
        notes: "This specific model / revision is not listed as compatible in our current reference.",
        outlet: null,
        recommended: ["Firman T08072", "Generac GP8000E"],
        flags: ["portable"]
      },
      {
        brand: "Honda",
        models: ["EU7000IS", "EU7000", "EU6500IS"],
        status: "conditional",
        notes: "Inverter units may be compatible when equipped with a 120/240V outlet and used within the rated capacity. Must be confirmed against official list.",
        outlet: "30A 120/240V (if equipped)",
        recommended: [],
        flags: ["portable", "inverter"]
      },
      {
        brand: "Champion",
        models: ["100520", "100519"],
        status: "compatible",
        notes: "Select Champion dual-fuel 8.75‚Äì10 kW units appear on the compatibility list; confirm by exact model number.",
        outlet: "L14-30 120/240V",
        recommended: [],
        flags: ["portable", "dualfuel"]
      }
      // Add more entries as needed‚Ä¶
    ];

    // Utility: normalize text for comparison (remove spaces, dashes, upper-case)
    function normalize(str) {
      return (str || "").toString().trim().toUpperCase().replace(/[\s\-_/]+/g, "");
    }

    function describeWattage(val) {
      switch (val) {
        case "under5": return "Under 5 kW";
        case "5to8": return "5 ‚Äì 8 kW";
        case "8to12": return "8 ‚Äì 12 kW";
        case "12to15": return "12 ‚Äì 15 kW";
        case "over15": return "15 kW +";
        default: return "Not specified";
      }
    }

    function findCompatibility(brand, model, rev, type, watts) {
      const normBrand = normalize(brand);
      const normModel = normalize(model);

      let bestMatch = null;

      // Exact match (brand + model) within dataset
      COMPAT_DATA.forEach(entry => {
        if (normalize(entry.brand) !== normBrand) return;

        entry.models.forEach(m => {
          if (normalize(m) === normModel) {
            bestMatch = {
              ...entry,
              matchedModel: m,
              confidence: "exact"
            };
          }
        });
      });

      // If no exact match, try partial model match for same brand
      if (!bestMatch && normModel) {
        COMPAT_DATA.forEach(entry => {
          if (normalize(entry.brand) !== normBrand) return;

          entry.models.forEach(m => {
            if (normalize(m).includes(normModel) || normModel.includes(normalize(m))) {
              if (!bestMatch) {
                bestMatch = {
                  ...entry,
                  matchedModel: m,
                  confidence: "partial"
                };
              }
            }
          });
        });
      }

      if (bestMatch) {
        return bestMatch;
      }

      // Nothing in dataset: unknown / not listed
      return {
        brand,
        models: [],
        status: "unknown",
        notes: "This exact model does not appear in our current internal reference. It may still be compatible, but it needs to be checked against the latest official GenerLink compatibility list.",
        outlet: null,
        recommended: [],
        flags: [type],
        confidence: "none"
      };
    }

    function runCompatibilityCheck() {
      const brand = document.getElementById("genBrand").value || "";
      const model = document.getElementById("genModel").value || "";
      const rev = document.getElementById("genRev").value || "";
      const type = document.getElementById("genType").value || "portable";
      const wattsRadio = document.querySelector('input[name="watts"]:checked');
      const watts = wattsRadio ? wattsRadio.value : "";

      if (!brand || !model) {
        alert("Please enter at least the brand and model of your generator.");
        return;
      }

      const result = findCompatibility(brand, model, rev, type, watts);
      updateResults({ brand, model, rev, type, watts, result });
    }

    function updateResults({ brand, model, rev, type, watts, result }) {
      const statusBadge = document.getElementById("statusBadge");
      const resultTitle = document.getElementById("resultTitle");
      const resultSummary = document.getElementById("resultSummary");
      const resultTags = document.getElementById("resultTags");
      const summaryList = document.getElementById("summaryList");
      const altBox = document.getElementById("altBox");
      const altText = document.getElementById("altText");

      let statusText = "";
      let statusBadgeClass = "";
      let mainTitle = "";
      let summary = "";

      switch (result.status) {
        case "compatible":
          statusText = "Compatible (guide only)";
          statusBadgeClass = "badge-status-ok";
          mainTitle = "Likely Compatible";
          summary = result.notes || "This generator appears on our internal compatibility reference as compatible with GenerLink.";
          break;
        case "conditional":
          statusText = "Conditionally compatible";
          statusBadgeClass = "badge-status-warn";
          mainTitle = "Conditionally Compatible";
          summary = result.notes || "Compatibility may depend on the exact outlet configuration and load. Confirm against the official GenerLink list.";
          break;
        case "not":
          statusText = "Not compatible / not supported";
          statusBadgeClass = "badge-status-bad";
          mainTitle = "Not Listed as Compatible";
          summary = result.notes || "This generator is not listed as compatible in our reference.";
          break;
        default:
          statusText = "Not listed ‚Äì needs manual review";
          statusBadgeClass = "";
          mainTitle = "Not Found in Reference";
          summary = result.notes;
      }

      statusBadge.textContent = statusText;
      statusBadge.classList.remove("badge-status-ok", "badge-status-warn", "badge-status-bad");
      if (statusBadgeClass) statusBadge.classList.add(statusBadgeClass);

      resultTitle.textContent = mainTitle;
      resultSummary.textContent = summary;

      // Tags
      resultTags.innerHTML = "";

      const brandTag = document.createElement("span");
      brandTag.className = "tag";
      brandTag.textContent = `Brand: ${brand}`;
      resultTags.appendChild(brandTag);

      const modelTag = document.createElement("span");
      modelTag.className = "tag";
      modelTag.textContent = `Model: ${model}`;
      resultTags.appendChild(modelTag);

      if (rev) {
        const revTag = document.createElement("span");
        revTag.className = "tag";
        revTag.textContent = `Revision: ${rev}`;
        resultTags.appendChild(revTag);
      }

      const typeTag = document.createElement("span");
      typeTag.className = "tag";
      typeTag.textContent = type === "portable" ? "Portable generator" : "Home standby";
      resultTags.appendChild(typeTag);

      const wattTag = document.createElement("span");
      wattTag.className = "tag";
      wattTag.textContent = `Approx. output: ${describeWattage(watts)}`;
      resultTags.appendChild(wattTag);

      if (result.outlet) {
        const outletTag = document.createElement("span");
        outletTag.className = "tag ok";
        outletTag.textContent = `Typical outlet: ${result.outlet}`;
        resultTags.appendChild(outletTag);
      }

      if (result.status === "not") {
        const warnTag = document.createElement("span");
        warnTag.className = "tag bad";
        warnTag.textContent = "Not recommended for GenerLink";
        resultTags.appendChild(warnTag);
      } else if (result.status === "unknown") {
        const warnTag = document.createElement("span");
        warnTag.className = "tag warn";
        warnTag.textContent = "Manual compatibility check required";
        resultTags.appendChild(warnTag);
      }

      // Summary list
      const items = [];
      items.push(`Brand: ${brand || "‚Äî"}`);
      items.push(`Model: ${model || "‚Äî"}`);
      items.push(`Revision: ${rev || "Not specified"}`);
      items.push(`Generator type: ${type === "portable" ? "Portable generator" : "Home standby"}`);
      items.push(`Approximate output: ${describeWattage(watts)}`);

      summaryList.innerHTML = "";
      items.forEach(txt => {
        const li = document.createElement("li");
        li.textContent = txt;
        summaryList.appendChild(li);
      });

      // Alternative suggestions / next steps text
      let altLines = [];

      if (result.status === "compatible" || result.status === "conditional") {
        altLines.push("‚Ä¢ Confirm against the current official GenerLink compatibility list.");
        altLines.push("‚Ä¢ Ensure you have the correct 120/240V outlet (often L14-30) and a properly rated cord.");
        altLines.push("‚Ä¢ We recommend a quick review with our team before purchasing or installing.");
      } else if (result.status === "not") {
        altLines.push("‚Ä¢ This generator is not listed as compatible in our reference.");
        if (result.recommended && result.recommended.length) {
          altLines.push("‚Ä¢ Suggested alternatives or compatible series:");
          result.recommended.forEach(r => altLines.push(`  - ${r}`));
        }
        altLines.push("‚Ä¢ Contact Generator Solutions to review compatible generator options for your home and GenerLink.");
      } else {
        altLines.push("‚Ä¢ This model is not appearing in our current reference.");
        altLines.push("‚Ä¢ Please send us a clear photo of the data plate and outlets, or include full model and revision in your email.");
        altLines.push("‚Ä¢ We‚Äôll verify it against the latest official GenerLink list and your utility‚Äôs requirements.");
      }

      if (altLines.length) {
        altBox.style.display = "block";
        altText.innerHTML = altLines.join("<br>");
      } else {
        altBox.style.display = "none";
        altText.innerHTML = "";
      }

      // Store latest check for email use
      window._lastCheck = {
        statusText,
        mainTitle,
        summary,
        brand,
        model,
        rev,
        type,
        wattsLabel: describeWattage(watts),
        outlet: result.outlet || "Not specified",
        recommended: result.recommended || [],
        rawStatus: result.status
      };
    }

    function resetChecker() {
      document.getElementById("genBrand").value = "";
      document.getElementById("genModel").value = "";
      document.getElementById("genRev").value = "";
      document.getElementById("genType").value = "portable";

      document.querySelectorAll('input[name="watts"]').forEach((r, idx) => {
        r.checked = idx === 1; // default 5‚Äì8 kW
      });

      document.getElementById("statusBadge").textContent = "Waiting for input‚Ä¶";
      document.getElementById("statusBadge").classList.remove("badge-status-ok", "badge-status-warn", "badge-status-bad");

      document.getElementById("resultTitle").textContent = "No result yet";
      document.getElementById("resultSummary").textContent =
        "Enter your generator details on the left and click ‚ÄúCheck Compatibility‚Äù to see if it appears in our reference list.";
      document.getElementById("resultTags").innerHTML = "";
      document.getElementById("summaryList").innerHTML = `
        <li>Brand: ‚Äî</li>
        <li>Model: ‚Äî</li>
        <li>Revision: ‚Äî</li>
        <li>Generator type: ‚Äî</li>
        <li>Approximate output: ‚Äî</li>
      `;
      document.getElementById("altBox").style.display = "none";
      document.getElementById("altText").innerHTML = "";

      window._lastCheck = null;
    }

    function openEmailDraft() {
      const check = window._lastCheck;
      const name = document.getElementById("custName").value.trim();
      const email = document.getElementById("custEmail").value.trim();

      if (!check) {
        alert("Please run the compatibility check first so we can include your results.");
        return;
      }
      if (!email) {
        alert("Please enter your email address so we can include it in the message.");
        return;
      }

      const subject = encodeURIComponent("GenerLink Compatibility Check ‚Äì Generator Solutions");

      const lines = [];
      lines.push("Hello Generator Solutions Team,");
      lines.push("");
      lines.push("Here are my GenerLink compatibility results from your online checker:");
      lines.push("");
      lines.push(`‚Ä¢ Status: ${check.mainTitle} (${check.statusText})`);
      lines.push(`‚Ä¢ Summary: ${check.summary}`);
      lines.push("");
      lines.push("Generator details:");
      lines.push(`‚Ä¢ Brand: ${check.brand}`);
      lines.push(`‚Ä¢ Model: ${check.model}`);
      lines.push(`‚Ä¢ Revision: ${check.rev || "(not specified)"}`);
      lines.push(`‚Ä¢ Type: ${check.type === "portable" ? "Portable generator" : "Home standby"}`);
      lines.push(`‚Ä¢ Approximate output: ${check.wattsLabel}`);
      lines.push(`‚Ä¢ Typical outlet (if applicable): ${check.outlet}`);
      if (check.recommended && check.recommended.length) {
        lines.push("");
        lines.push("Suggested alternatives / compatible options (from tool):");
        check.recommended.forEach(r => lines.push(`‚Ä¢ ${r}`));
      }
      lines.push("");
      lines.push("My contact details:");
      lines.push(`‚Ä¢ Name: ${name || "(not provided)"}`);
      lines.push(`‚Ä¢ Email: ${email}`);
      lines.push("");
      lines.push("Please review this information against the official GenerLink compatibility list and my local utility's requirements, and let me know:");
      lines.push("‚Ä¢ If this generator is compatible, and");
      lines.push("‚Ä¢ Any recommendations or next steps.");
      lines.push("");
      lines.push("Thank you!");
      const body = encodeURIComponent(lines.join("\n"));

      const mailto = `mailto:sales@generatorsolutions.ca?cc=${encodeURIComponent(email)}&subject=${subject}&body=${body}`;
      window.location.href = mailto;
    }

    function bookGenerLinkConsult() {
      // For now, reuse the same detailed email flow as "Email Compatibility Result"
      openEmailDraft();
    }
  </script>
</body>
</html>
