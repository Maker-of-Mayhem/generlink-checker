<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>GenerLink Compatibility Checker ‚Äì Generator Solutions</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    :root {
      --midnight: #020921;
      --accent-orange: #f58a1f;
      --accent-blue: #245bb4;
      --text-light: #f5f7ff;
      --text-muted: #b6c2e3;
      --card-bg: #050b1b;
      --ok: #4ade80;
      --warn: #facc15;
      --bad: #f97373;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      min-height: 100vh;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: radial-gradient(circle at top, #0b1f4a 0, var(--midnight) 45%, #000 100%);
      color: var(--text-light);
      padding: 24px 16px 40px;
      display: flex;
      justify-content: center;
    }

    .page-wrap {
      width: 100%;
      max-width: 1100px;
    }

    header {
      text-align: center;
      margin-bottom: 24px;
    }

    .brand {
      margin-bottom: 12px;
    }

    .brand img {
      height: 70px;
      width: auto;
      filter: drop-shadow(0 0 4px rgba(255,255,255,0.7));
    }

    h1 {
      font-size: 1.9rem;
      margin-bottom: 6px;
    }

    .tagline {
      font-size: 0.95rem;
      color: var(--text-muted);
      max-width: 680px;
      margin: 0 auto;
    }

   .layout {
  display: grid;
  grid-template-columns: minmax(0, 1.4fr) minmax(0, 1.1fr);
  gap: 20px;
  margin-top: 26px;
}


    @media (max-width: 900px) {
      .layout {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    .card {
      background: radial-gradient(circle at top, #101935 0, var(--card-bg) 55%);
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,0.05);
      padding: 18px 18px 22px;
      box-shadow:
        0 20px 50px rgba(0,0,0,0.65),
        0 0 0 1px rgba(255,255,255,0.02);
    }

    .card h2 {
      font-size: 1.2rem;
      margin-bottom: 6px;
    }

    .card-sub {
      font-size: 0.9rem;
      color: var(--text-muted);
      margin-bottom: 14px;
    }

    .section-title {
      font-size: 0.9rem;
      text-transform: uppercase;
      letter-spacing: 0.14em;
      color: var(--text-muted);
      margin: 14px 0 6px;
    }

    label {
      font-size: 0.9rem;
      display: block;
      margin-bottom: 5px;
    }

    select, input[type="text"], input[type="email"] {
      width: 100%;
      padding: 8px 10px;
      border-radius: 10px;
      border: 1px solid rgba(255,255,255,0.12);
      background: rgba(3,7,18,0.85);
      color: var(--text-light);
      font-size: 0.95rem;
      outline: none;
    }

    select:focus, input[type="text"]:focus, input[type="email"]:focus {
      border-color: var(--accent-orange);
      box-shadow: 0 0 0 1px rgba(245,138,31,0.4);
    }

    .grid-2 {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 10px 12px;
    }

    @media (max-width: 640px) {
      .grid-2 {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    .hint {
      font-size: 0.8rem;
      color: var(--text-muted);
      margin-top: 2px;
    }

    .pill-group {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    .pill-toggle {
      position: relative;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.18);
      background: rgba(15,23,42,0.9);
      font-size: 0.86rem;
      cursor: pointer;
      user-select: none;
    }

    .pill-toggle input {
      position: absolute;
      opacity: 0;
      pointer-events: none;
    }

    .pill-toggle span {
      pointer-events: none;
    }

    .pill-toggle input:checked + span {
      color: #020617;
      font-weight: 600;
    }

    .pill-bg {
      position: absolute;
      inset: -1px;
      border-radius: inherit;
      background: radial-gradient(circle at top, #fed7aa, #f97316);
      opacity: 0;
      transform: scale(0.9);
      transition: all 0.16s ease-out;
      z-index: -1;
    }

    .pill-toggle input:checked ~ .pill-bg {
      opacity: 1;
      transform: scale(1);
    }

    .buttons-row {
      margin-top: 18px;
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }
<p class="hint" id="dataStatus">Loading compatibility database‚Ä¶</p>

    button {
      border: none;
      border-radius: 999px;
      padding: 9px 16px;
      font-size: 0.95rem;
      cursor: pointer;
      font-weight: 600;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .btn-primary {
      background: linear-gradient(135deg, #fbbf24, #f97316);
      color: #020617;
      box-shadow:
        0 0 20px rgba(248,250,252,0.25),
        0 8px 25px rgba(0,0,0,0.9);
    }

    .btn-secondary {
      background: rgba(15,23,42,0.95);
      color: var(--text-light);
      border: 1px solid rgba(148,163,184,0.4);
    }

    .btn-primary:hover { filter: brightness(1.05); }
    .btn-secondary:hover { border-color: var(--accent-orange); }

    .result-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 6px;
    }

    .badge {
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      padding: 4px 9px;
      border-radius: 999px;
      border: 1px solid rgba(148,163,184,0.5);
      color: var(--text-muted);
    }

    .badge-status-ok { border-color: var(--ok); color: var(--ok); }
    .badge-status-warn { border-color: var(--warn); color: var(--warn); }
    .badge-status-bad { border-color: var(--bad); color: var(--bad); }

    .result-main {
      font-size: 1.7rem;
      font-weight: 700;
      margin-bottom: 4px;
    }

    .result-sub {
      font-size: 0.95rem;
      color: var(--text-muted);
      margin-bottom: 10px;
    }

    .tag-pills {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-bottom: 10px;
    }

    .tag {
      font-size: 0.78rem;
      padding: 4px 8px;
      border-radius: 999px;
      background: rgba(15,23,42,0.9);
      border: 1px solid rgba(148,163,184,0.5);
    }

    .tag.ok { border-color: var(--ok); color: var(--ok); }
    .tag.warn { border-color: var(--warn); color: var(--warn); }
    .tag.bad { border-color: var(--bad); color: var(--bad); }

    .summary-list {
      list-style: none;
      font-size: 0.88rem;
      color: var(--text-muted);
      margin: 8px 0 12px;
    }

    .summary-list li { margin-bottom: 4px; }

    .alt-box {
      margin-top: 8px;
      padding: 8px 10px;
      border-radius: 12px;
      border: 1px solid rgba(148,163,184,0.4);
      background: rgba(15,23,42,0.75);
      font-size: 0.86rem;
    }

    .alt-box strong {
      color: var(--accent-orange);
    }

    .legal-note {
      margin-top: 10px;
      font-size: 0.78rem;
      color: var(--text-muted);
    }

    .email-section {
      margin-top: 14px;
      border-top: 1px solid rgba(148,163,184,0.35);
      padding-top: 10px;
    }

    .email-grid {
      display: grid;
      grid-template-columns: minmax(0, 1.1fr) minmax(0, 1.1fr);
      gap: 8px 10px;
      margin-bottom: 8px;
    }

    @media (max-width: 700px) {
      .email-grid {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    .email-note {
      font-size: 0.8rem;
      color: var(--text-muted);
    }

    .notice {
      font-size: 0.8rem;
      margin-top: 6px;
      color: var(--text-muted);
    }
  </style>
</head>
<body>
  <div class="page-wrap">
    <header>
      <div class="brand">
        <!-- Replace logo.png with your actual logo file name if different -->
        <img src="logo.png" alt="Generator Solutions Logo" />
      </div>
      <h1>GenerLink Compatibility Checker</h1>
      <p class="legal-note">
  <strong>Disclaimer:</strong>
  This tool is based on the most current GenerLink compatibility information available to us.
  It is provided for reference <strong>ONLY</strong>.
  Always consult with your local electrical authority and/or a licensed electrician to ensure that
  <u><strong>YOUR</strong></u> portable generator is compatible with the GenerLink unit selected.
</p>

    </header>

    <main class="layout">
      <!-- LEFT: INPUTS -->
      <section class="card">
        <h2>Your Generator Details</h2>
        <p class="card-sub">
          Enter your generator information as it appears on the data plate.
          The more accurately it‚Äôs entered, the better the compatibility match.
        </p>

      <div class="section-title">Manufacturer & Model</div>
<div class="grid-2">
  <label>
    Manufacturer
    <input type="text" id="genBrand" list="manufacturerList"
           placeholder="Start typing‚Ä¶ (e.g. Generac, Honda, Firman)" autocomplete="off" />
    <datalist id="manufacturerList"></datalist>
    <div class="hint">Start typing and select from the list (from our reference database).</div>
  </label>

  <label>
    Generator Model Number
    <input type="text" id="genModel" placeholder="e.g. GP8000E, P08008, EU7000is" />
    <div class="hint">Type the exact model from the generator nameplate.</div>
  </label>
</div>

        <div class="section-title">Revision / Version (optional)</div>
        <div class="grid-2">
          <label>
            Revision / Version
            <input type="text" id="genRev" placeholder="e.g. REV 00, REV 01, A, B" />
          </label>
         <label>
  Generator Type
  <input type="text" value="Portable generator" disabled />
  <input type="hidden" id="genType" value="portable" />
</label>

        </div>

        <div class="section-title">Approximate Output</div>
        <div class="pill-group" id="wattageGroup">
          <label class="pill-toggle">
            <input type="radio" name="watts" value="under5" />
            <span>Under 5 kW</span>
            <div class="pill-bg"></div>
          </label>
          <label class="pill-toggle">
            <input type="radio" name="watts" value="5to8" checked />
            <span>5 ‚Äì 8 kW</span>
            <div class="pill-bg"></div>
          </label>
          <label class="pill-toggle">
            <input type="radio" name="watts" value="8to12" />
            <span>8 ‚Äì 12 kW</span>
            <div class="pill-bg"></div>
          </label>
          <label class="pill-toggle">
            <input type="radio" name="watts" value="12to15" />
            <span>12 ‚Äì 15 kW</span>
            <div class="pill-bg"></div>
          </label>
          <label class="pill-toggle">
            <input type="radio" name="watts" value="over15" />
            <span>15 kW +</span>
            <div class="pill-bg"></div>
          </label>
        </div>
        <p class="hint">
          If you‚Äôre not sure, use the running wattage from the data plate or user manual.
        </p>

        <div class="buttons-row">
 <button class="btn-primary" type="button" onclick="alert('Button click works'); runCompatibilityCheck();">
  ‚ö° Check Compatibility
</button>


<button class="btn-secondary" type="button" onclick="resetChecker()">
  Reset
</button>

</div>  
      </section>

      <!-- RIGHT: RESULTS -->
      <section class="card">
        <div class="result-header">
          <h2>Compatibility Result</h2>
          <span class="badge" id="statusBadge">Waiting for input‚Ä¶</span>
        </div>

        <div id="resultTitle" class="result-main">No result yet</div>
        <p id="resultSummary" class="result-sub">
          Enter your generator details on the left and click ‚ÄúCheck Compatibility‚Äù to see if it appears in our reference list.
        </p>

        <div class="tag-pills" id="resultTags"></div>

        <ul class="summary-list" id="summaryList">
          <li>Brand: ‚Äî</li>
          <li>Model: ‚Äî</li>
          <li>Revision: ‚Äî</li>
          <li>Generator type: ‚Äî</li>
          <li>Approximate output: ‚Äî</li>
        </ul>

        <div class="alt-box" id="altBox" style="display:none;">
          <strong>Suggested next steps:</strong>
          <div id="altText" style="margin-top:4px;"></div>
        </div>

        <p class="legal-note">
          This tool is for guidance only and is based on a partial internal reference.
          Final compatibility must always be confirmed against the official GenerLink compatibility list and approved by your local utility and electrical authority.
        </p>

        <div class="email-section">
          <h3 style="font-size:1rem;margin-bottom:4px;">Email These Results</h3>
          <p class="email-note">
            Create an email with your compatibility result that you can send to yourself and to Generator Solutions.
          </p>

          <div class="email-grid">
            <label>
              <span style="font-size:0.85rem;">Your name</span>
              <input type="text" id="custName" placeholder="e.g. Jane Smith" />
            </label>
            <label>
              <span style="font-size:0.85rem;">Your email address</span>
              <input type="email" id="custEmail" placeholder="you@example.com" />
            </label>
          </div>

         <div class="buttons-row">
  <button class="btn-primary" type="button" onclick="openEmailDraft('results')">
    ‚úâÔ∏è Email Compatibility Result
  </button>

  <button class="btn-secondary" type="button" onclick="openEmailDraft('consultation')">
    üìç Book a GenerLink Consultation
  </button>
</div>


          <p class="notice">
            This uses your device‚Äôs email app to create a draft addressed to
            <strong>sales@generatorsolutions.ca</strong> with you on copy. You can review and send it from there.
          </p>
        </div>
      </section>
    </main>
  </div>

<script>
  // Global compatibility dataset ‚Äì loaded from JSON file
  let COMPAT_DATA = [];
  let compatLoaded = false;

  // Load JSON on page load
 fetch("generlink_compat_data.json")
  .then(res => res.json())
  .then(data => {
    COMPAT_DATA = data;
    compatLoaded = true;
    console.log("GenerLink compatibility data loaded:", COMPAT_DATA.length, "entries");
    populateManufacturerDatalist(COMPAT_DATA);
    console.log("Manufacturers populated ‚úÖ");
  })
  .catch(err => {
    console.error("Error loading compatibility data:", err);
  });



  // Normalize helper
  function normalize(str) {
    return (str || "")
      .toString()
      .trim()
      .toUpperCase()
      .replace(/[\s\-_\/]+/g, "");
  }
function populateManufacturerDatalist(data) {
  const dl = document.getElementById("manufacturerList");
  if (!dl) return;

  // collect unique manufacturers
  const set = new Set();
  data.forEach(row => {
    if (row && row.manufacturer) {
      const m = row.manufacturer.toString().trim();
      if (m) set.add(m);
    }
  });

  // sort alphabetically
  const manufacturers = Array.from(set).sort((a, b) => a.localeCompare(b));

  // populate datalist
  dl.innerHTML = "";
  manufacturers.forEach(m => {
    const opt = document.createElement("option");
    opt.value = m;
    dl.appendChild(opt);
  });
}

  function describeWattageChoice(val) {
    switch (val) {
      case "under5": return "Under 5 kW";
      case "5to8":   return "5 ‚Äì 8 kW";
      case "8to12":  return "8 ‚Äì 12 kW";
      case "12to15": return "12 ‚Äì 15 kW";
      case "over15": return "15 kW +";
      default:       return "Not specified";
    }
  }

  function classifyDbWatts(wattsStr) {
    if (!wattsStr) return "";
    const n = parseInt(wattsStr, 10);
    if (!n || isNaN(n)) return "";
    if (n < 4000) return "Light-duty (under ~4 kW)";
    if (n < 8000) return "Typical portable size for essential loads";
    if (n < 12000) return "Mid-range output";
    return "High-output portable (check service & cord sizing)";
  }

  function findCompatibility(brand, model) {
    const normBrand = normalize(brand);
    const normModel = normalize(model);

    if (!COMPAT_DATA.length) {
      return null;
    }

    let candidates = COMPAT_DATA;

    if (normBrand) {
      candidates = candidates.filter(row => normalize(row.manufacturer) === normBrand);
    }

    let exactMatch = null;
    let partialMatch = null;

    candidates.forEach(row => {
      const nm = normalize(row.model);
      if (nm === normModel) {
        exactMatch = row;
      } else if (!partialMatch && (nm.includes(normModel) || normModel.includes(nm))) {
        partialMatch = row;
      }
    });

    if (exactMatch) {
      return { ...exactMatch, confidence: "exact" };
    }
    if (partialMatch) {
      return { ...partialMatch, confidence: "partial" };
    }

    return null;
  }

  function runCompatibilityCheck() {
    if (!compatLoaded) {
      alert("Compatibility data is still loading. Please wait a moment and try again.");
      return;
    }

    const brand = document.getElementById("genBrand").value || "";
    const model = document.getElementById("genModel").value || "";
    const rev   = document.getElementById("genRev").value || "";
    const type  = document.getElementById("genType").value || "portable";
    const wattsRadio = document.querySelector('input[name="watts"]:checked');
    const wattsChoice = wattsRadio ? wattsRadio.value : "";

    if (!brand || !model) {
      alert("Please enter at least the brand and model of your generator.");
      return;
    }

    const dbResult = findCompatibility(brand, model);
    let result;

    if (dbResult) {
      result = {
        status: dbResult.status || "check",
        plugType: dbResult.plug_type || "",
        notes: dbResult.notes || "",
        dbWatts: dbResult.wattage || "",
        dbManufacturer: dbResult.manufacturer || brand,
        dbModel: dbResult.model || model,
        confidence: dbResult.confidence || "exact"
      };
    } else {
      result = {
        status: "unknown",
        plugType: "",
        notes: "This exact model does not appear in our current internal reference. It may still be compatible, but it must be checked against the latest official GenerLink list and your local utility‚Äôs requirements.",
        dbWatts: "",
        dbManufacturer: brand,
        dbModel: model,
        confidence: "none"
      };
    }

    updateResults({
      brand,
      model,
      rev,
      type,
      wattsChoice,
      result
    });
  }

  function updateResults({ brand, model, rev, type, wattsChoice, result }) {
    const statusBadge   = document.getElementById("statusBadge");
    const resultTitle   = document.getElementById("resultTitle");
    const resultSummary = document.getElementById("resultSummary");
    const resultTags    = document.getElementById("resultTags");
    const summaryList   = document.getElementById("summaryList");
    const altBox        = document.getElementById("altBox");
    const altText       = document.getElementById("altText");

    let statusText = "";
    let statusBadgeClass = "";
    let mainTitle = "";
    let summary = "";

    switch (result.status) {
      case "yes":
        statusText = "Compatible (guide only)";
        statusBadgeClass = "badge-status-ok";
        mainTitle = "Likely Compatible";
        summary = result.notes || "This generator appears in our reference as compatible with GenerLink.";
        break;
      case "no":
        statusText = "Not listed as compatible";
        statusBadgeClass = "badge-status-bad";
        mainTitle = "Not Listed as Compatible";
        summary = result.notes || "This generator is not listed as compatible in our current reference.";
        break;
      case "check":
        statusText = "Manual check recommended";
        statusBadgeClass = "badge-status-warn";
        mainTitle = "Requires Manual Review";
        summary = result.notes || "Compatibility may depend on plug type, neutral bonding or local utility rules.";
        break;
      default:
        statusText = "Not listed ‚Äì needs manual review";
        statusBadgeClass = "";
        mainTitle = "Not Found in Reference";
        summary = result.notes;
    }

    statusBadge.textContent = statusText;
    statusBadge.classList.remove("badge-status-ok", "badge-status-warn", "badge-status-bad");
    if (statusBadgeClass) statusBadge.classList.add(statusBadgeClass);

    resultTitle.textContent = mainTitle;
    resultSummary.textContent = summary;

    // ---- Tags ----
    resultTags.innerHTML = "";

    const brandTag = document.createElement("span");
    brandTag.className = "tag";
    brandTag.textContent = `Brand: ${brand}`;
    resultTags.appendChild(brandTag);

    const modelTag = document.createElement("span");
    modelTag.className = "tag";
    modelTag.textContent = `Model: ${model}`;
    resultTags.appendChild(modelTag);

    if (rev) {
      const revTag = document.createElement("span");
      revTag.className = "tag";
      revTag.textContent = `Revision: ${rev}`;
      resultTags.appendChild(revTag);
    }

    const typeTag = document.createElement("span");
    typeTag.className = "tag";
    typeTag.textContent = type === "portable" ? "Portable generator" : "Home standby";
    resultTags.appendChild(typeTag);

    const wattsTag = document.createElement("span");
    wattsTag.className = "tag";
    wattsTag.textContent = `Approx. output (you): ${describeWattageChoice(wattsChoice)}`;
    resultTags.appendChild(wattsTag);

    // From DB: wattage class & plug type
    const dbWattClass = classifyDbWatts(result.dbWatts);
    if (dbWattClass) {
      const dbWTag = document.createElement("span");
      dbWTag.className = "tag";
      dbWTag.textContent = `DB size class: ${dbWattClass}`;
      resultTags.appendChild(dbWTag);
    }

    if (result.plugType) {
      const plugTag = document.createElement("span");
      plugTag.className = "tag ok";
      plugTag.textContent = `Plug type: ${result.plugType}`;
      resultTags.appendChild(plugTag);

      if (result.plugType.includes("TT-30") && !result.plugType.includes("L14-30")) {
        const warnTag = document.createElement("span");
        warnTag.className = "tag warn";
        warnTag.textContent = "TT-30 is 120V only ‚Äì typically not suitable for GenerLink";
        resultTags.appendChild(warnTag);
      }
    } else {
      const plugWarn = document.createElement("span");
      plugWarn.className = "tag warn";
      plugWarn.textContent = "Plug type not specified ‚Äì confirm outlet is 120/240V (e.g., L14-30)";
      resultTags.appendChild(plugWarn);
    }

    if (result.status === "no") {
      const badTag = document.createElement("span");
      badTag.className = "tag bad";
      badTag.textContent = "Not recommended for GenerLink based on current reference";
      resultTags.appendChild(badTag);
    } else if (result.status === "check" || result.status === "unknown") {
      const warnTag = document.createElement("span");
      warnTag.className = "tag warn";
      warnTag.textContent = "Manual compatibility check required";
      resultTags.appendChild(warnTag);
    }

    // ---- Summary list ----
    const items = [];
    items.push(`Brand: ${brand || "‚Äî"}`);
    items.push(`Model: ${model || "‚Äî"}`);
    items.push(`Revision: ${rev || "Not specified"}`);
    items.push(`Generator type: ${type === "portable" ? "Portable generator" : "Home standby"}`);
    items.push(`Approximate output (your selection): ${describeWattageChoice(wattsChoice)}`);
    if (result.dbWatts) {
      items.push(`Approximate output (reference): ${result.dbWatts} W`);
    }

    summaryList.innerHTML = "";
    items.forEach(txt => {
      const li = document.createElement("li");
      li.textContent = txt;
      summaryList.appendChild(li);
    });

    // ---- Next steps text ----
    let altLines = [];

    if (result.status === "yes") {
      altLines.push("‚Ä¢ Confirm this generator against the latest official GenerLink compatibility list.");
      altLines.push("‚Ä¢ Ensure it has a 120/240V outlet (often L14-30) and a properly rated cord.");
      altLines.push("‚Ä¢ We recommend a quick review with our team before purchase or installation.");
    } else if (result.status === "no") {
      altLines.push("‚Ä¢ This generator is not listed as compatible in our current reference.");
      altLines.push("‚Ä¢ Contact Generator Solutions to review compatible generator options and GenerLink sizing for your home.");
    } else {
      altLines.push("‚Ä¢ This model needs a manual compatibility check.");
      altLines.push("‚Ä¢ Please include clear photos of the data plate and outlets when you contact us.");
      altLines.push("‚Ä¢ We‚Äôll verify it against the official GenerLink list and your local utility‚Äôs requirements.");
    }

    if (altLines.length) {
      altBox.style.display = "block";
      altText.innerHTML = altLines.join("<br>");
    } else {
      altBox.style.display = "none";
      altText.innerHTML = "";
    }

    // Store for email
    window._lastCheck = {
      statusLabel: statusText,
      mainTitle,
      summary,
      brand,
      model,
      rev,
      type: type === "portable" ? "Portable generator" : "Home standby",
      wattsChoiceLabel: describeWattageChoice(wattsChoice),
      dbWatts: result.dbWatts || "",
      plugType: result.plugType || "",
      dbWattClass,
      statusCode: result.status
    };
  }

  function resetChecker() {
    document.getElementById("genBrand").value = "";
    document.getElementById("genModel").value = "";
    document.getElementById("genRev").value = "";
    document.getElementById("genType").value = "portable";

    document.querySelectorAll('input[name="watts"]').forEach((r, idx) => {
      r.checked = (r.value === "5to8");
    });

    document.getElementById("statusBadge").textContent = "Waiting for input‚Ä¶";
    document.getElementById("statusBadge").classList.remove("badge-status-ok", "badge-status-warn", "badge-status-bad");

    document.getElementById("resultTitle").textContent = "No result yet";
    document.getElementById("resultSummary").textContent =
      "Enter your generator details on the left and click ‚ÄúCheck Compatibility‚Äù to see if it appears in our reference list.";
    document.getElementById("resultTags").innerHTML = "";
    document.getElementById("summaryList").innerHTML = `
      <li>Brand: ‚Äî</li>
      <li>Model: ‚Äî</li>
      <li>Revision: ‚Äî</li>
      <li>Generator type: ‚Äî</li>
      <li>Approximate output: ‚Äî</li>
    `;
    document.getElementById("altBox").style.display = "none";
    document.getElementById("altText").innerHTML = "";

    window._lastCheck = null;
  }
function openEmailDraft(source) {
  source = source || "results";

    const check = window._lastCheck;
    const name  = document.getElementById("custName").value.trim();
    const email = document.getElementById("custEmail").value.trim();
  const phone = (document.getElementById("custPhone")?.value || "").trim();
const address = (document.getElementById("installAddress")?.value || "").trim();

    <label>
  <span style="font-size:0.85rem;">Phone number (required for consultation)</span>
  <input type="text" id="custPhone" placeholder="e.g. (705) 286-1003" />
</label>

<label>
  <span style="font-size:0.85rem;">Installation address (required for consultation)</span>
  <input type="text" id="installAddress" placeholder="Street, City, Province, Postal Code" />
</label>


    if (!check) {
      alert("Please run the compatibility check first so we can include your results.");
      return;
    }
    if (!email) {
      alert("Please enter your email address so we can include it in the message.");
      return;
    }
if (source === "consultation") {
  if (!phone) {
    alert("Please enter your phone number so we can contact you to book the consultation.");
    return;
  }
  if (!address) {
    alert("Please enter the full installation address so we can confirm service area and prepare properly.");
    return;
  }
}
const subject = encodeURIComponent(
  source === "consultation"
    ? "GenerLink Consultation Request ‚Äì Compatibility Check (Generator Solutions)"
    : "GenerLink Compatibility Check ‚Äì Generator Solutions"
);


    const lines = [];
  lines.push(`‚Ä¢ CTA used: ${source === "consultation" ? "Book a GenerLink Consultation" : "Email Compatibility Result"}`);

    lines.push("Hello Generator Solutions Team,");
    lines.push("");
    lines.push("Here are my GenerLink compatibility results from your online checker:");
    lines.push("");
    lines.push(`‚Ä¢ Status: ${check.mainTitle} (${check.statusLabel})`);
    lines.push(`‚Ä¢ Summary: ${check.summary}`);
    lines.push("");
    lines.push("Generator details:");
    lines.push(`‚Ä¢ Brand: ${check.brand}`);
    lines.push(`‚Ä¢ Model: ${check.model}`);
    lines.push(`‚Ä¢ Revision: ${check.rev || "(not specified)"}`);
    lines.push(`‚Ä¢ Type: ${check.type}`);
    lines.push(`‚Ä¢ Approximate output (my selection): ${check.wattsChoiceLabel}`);
    if (check.dbWatts) {
      lines.push(`‚Ä¢ Approximate output (reference): ${check.dbWatts} W`);
    }
    if (check.plugType) {
      lines.push(`‚Ä¢ Plug type (reference): ${check.plugType}`);
    }
    if (check.dbWattClass) {
      lines.push(`‚Ä¢ Load class: ${check.dbWattClass}`);
    }
    lines.push("");
    lines.push("My contact details:");
    lines.push(`‚Ä¢ Name: ${name || "(not provided)"}`);
    lines.push(`‚Ä¢ Email: ${email}`);
  lines.push(`‚Ä¢ Phone: ${phone || "(not provided)"}`);
lines.push(`‚Ä¢ Installation address: ${address || "(not provided)"}`);

    lines.push("");
    lines.push("Please review this information against the official GenerLink compatibility list and my local utility's requirements, and let me know:");
    lines.push("‚Ä¢ If this generator is compatible, and");
    lines.push("‚Ä¢ Any recommendations or next steps.");
    lines.push("");
    lines.push("Thank you!");

    const body = encodeURIComponent(lines.join("\n"));
    const mailto = `mailto:sales@generatorsolutions.ca?cc=${encodeURIComponent(email)}&subject=${subject}&body=${body}`;
    window.location.href = mailto;
  }

  function bookGenerLinkConsult() {
    // For now, reuse the same detailed email flow
    openEmailDraft();
  }
</script>

</body>
</html>



















